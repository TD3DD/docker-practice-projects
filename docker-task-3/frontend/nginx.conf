server {
  listen 80; # Nginx слухає на порту 80 всередині контейнера

  # 1. Обробка запитів до "кореня" (наш сайт)
  location / {
    root /usr/share/nginx/html; # Де лежать файли
    index index.html;            # Файл за замовчуванням
  }

  # 2. Обробка запитів до API (проксі)
  location /api/ {
    # 'backend' -- ім'я сервісу з docker-compose
    # '5001' -- порт, на якому працює backend

    # Перенаправляємо запит (наприклад, /api/users)
    # на http://backend:5001/api/users
    proxy_pass http://backend:5001/api/;

    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  }
}